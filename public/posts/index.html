<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>fletchers-cloud-blog/posts/</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">
    <meta name="googlebot" content="index,follow,snippet,archive">
    <link rel="stylesheet" href="https://example.com/hugo-theme-console/css/terminal-0.7.4.min.css">
    <link rel="stylesheet" href="https://example.com/hugo-theme-console/css/animate-4.1.1.min.css">
    <link rel="stylesheet" href="https://example.com/hugo-theme-console/css/console.css">
    
      <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
       
      <link href="https://example.com/posts/index.xml" rel="alternate" type="application/rss+xml" title="fletchers-cloud-blog" />
    <meta property="og:title" content="Posts" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://example.com/posts/" />


<meta name="twitter:title" content="Posts"/>
<meta name="twitter:description" content=""/>

</head>
<body class="terminal">
    <div class="container">
        <div class="terminal-nav">
          <header class="terminal-logo">
            <div class="logo terminal-prompt">
              
              
              <a href="https://example.com/" class="no-style site-name">fletchers-cloud-blog</a>:~# 
              <a href='https://example.com/posts'>posts</a>/</div></header>
          <nav class="terminal-menu">
            <ul vocab="https://schema.org/" typeof="BreadcrumbList">
                
                <li><a href="https://example.com/about/" typeof="ListItem">about/</a></li>
                
                <li><a href="https://example.com/posts/" typeof="ListItem">posts/</a></li>
                
            </ul>
          </nav>
        </div>
    </div>

    <div class="container animated zoomIn fast" >
        
<h1>Posts</h1>
<br/>


<div class="posts-list">

    
        <div class="post">
            <p>
                <div class="date">Aug. 29, 2024</div>    
                <h1><a href="https://example.com/posts/2024/using-the-az-rest-cli-command/" title="Using the AZ Rest CLI command">Using the AZ Rest CLI command</a></h1>
                <p>What are we doing?</p>
<p>With this post I am going to show you how you can easily do Azure API calls and “skip” a lot of the difficult items. I have been on something interesting tools to help my customers, when I can talk more about it, I will. As part of this tooling exercise, the Azure REST API is used extensively. With “normal” applications like APIDog, ThunderClient and the like, you often need to get a token and then add this to the header as an auth object and this involves configuration on EntraID and the like. This is not necessarily the best approach for what I was looking for. I was looking for a quick testing framework for Azure REST API calls and then look at the output to be further extracted / manipulated with JQ.</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Nov. 21, 2023</div>    
                <h1><a href="https://example.com/posts/2023/azure-vmware-solution-how-do-i-monitor-sddc-deployment/" title="Azure VMware Solution How Do I &#39;Monitor my SDDC Deployment&#39;">Azure VMware Solution How Do I &#39;Monitor my SDDC Deployment&#39;</a></h1>
                <h2 id="what-are-we-doing">What are we doing?</h2>
<p>As I spend more time with my customers and my teams within my organization, I am learning that there a lot of aspects of Azure VMware Solution that we take for granted and simply skim over as we assume (badly) that everyone knows exactly how to &ldquo;the basics&rdquo;. With this series of &ldquo;How Do I&rdquo; posts, I am going to try and address some of the more common questions that I get asked and hopefully provide some useful information to help you on your Azure VMware Solution journey. I will endeavour to copy as many topics as I can and I am always open to ideas and suggestions. You can reach out to me on <a href="https://www.twitter.com/fskelly">Twitter</a> or post a suggestion for the log on <a href="https://github.com/fskelly/flkelly-cloudblog/issues">GitHub</a> - please remember these are designed to be short and sweet and not full blown tutorials.</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Oct. 26, 2023</div>    
                <h1><a href="https://example.com/posts/2023/azure-vmware-solution-starter-links/" title="Azure VMware Solution Starter Links">Azure VMware Solution Starter Links</a></h1>
                <h2 id="what-are-we-doing">What are we doing?</h2>
<p>Providing people with a list of useful links and blog posts to help you get grounded in Azure VMware Solution. Some of the links are bery high-level and others are very detailed. Each link or blog post will address different items at different depths so you can hopefully find the exact link or information that you are looking for to make your journey in Azure VMware Solution a little easier.</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Oct. 11, 2023</div>    
                <h1><a href="https://example.com/posts/2023/starting-wth-rest-calls-with-az-cli-with-some-co-pilot-help/" title="Starting Wth Rest Calls With AzCli With Some Copilot Help">Starting Wth Rest Calls With AzCli With Some Copilot Help</a></h1>
                <h2 id="what-are-we-doing">What are we doing?</h2>
<p>I am working more and more with the Azure REST APIs now. My <a href="https://cloud.fskelly.com/post/2023/starting-wth-rest-calls-with-powershell/">previous post using API with Powershell</a> got me thinking about opening the idea to go beyond <a href="https://learn.microsoft.com/en-us/powershell/scripting/overview">PowerShell</a>. I am very open with people around my lack of skill with <a href="https://learn.microsoft.com/en-us/cli/azure/">Azure CLI</a>, I do however want to learn some new things.</p>
<p>We also have this great technology called <a href="https://github.com/features/copilot">GitHub Copilot</a> and <a href="https://openai.com/blog/chatgpt">ChatGPT</a>, so I figured let me dig into &ldquo;AI&rdquo; as I am a techy at heart and let me improve my skills with Azure CLI.</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Aug. 17, 2023</div>    
                <h1><a href="https://example.com/posts/2023/starting-wth-rest-calls-with-powershell/" title="Starting Wth API Rest Calls With Powershell">Starting Wth API Rest Calls With Powershell</a></h1>
                <h2 id="what-are-we-doing">What are we doing?</h2>
<p>I am working more and more with the Azure REST APIs now. My <a href="https://cloud.fskelly.com/post/2023/azure-cost-management-playing-with-api-in-powershell/">first dive into cost management</a> was a big hit, so I am expanding on that. The main consideration around that particular API is that is it open. By this, I mean a simple HTTP request will return results, no authentication or additional headers or the like are needed. So nice and easy. As we dive more into API and REST API&rsquo;s, this is likely to change. This post, with more planned, is designed to make this easier and break it down into smaller chunks. THese chunks/snippets can be re-used and the principles in the chunks/snippets can be applied to other API&rsquo;s. These in particular are aimed at Azure API&rsquo;s.</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Aug. 3, 2023</div>    
                <h1><a href="https://example.com/posts/2023/azure-cost-management-playing-with-api-in-powershell/" title="Can I run this cheaper? Use case for the Azure Cost Management API">Can I run this cheaper? Use case for the Azure Cost Management API</a></h1>
                <h2 id="what-are-we-doing">What are we doing?</h2>
<p>I was given inspiration by a colleague, <a href="https://www.linkedin.com/in/bhummerstone/">Ben Hummerstone</a> who used a <a href="https://learn.microsoft.com/en-us/azure/azure-functions/functions-reference-python?tabs=asgi%2Capplication-level&amp;pivots=python-mode-configuration">Azure Python Function</a>, whilst super cool and interesting, I am a PowerShell advocate through and through. So I used PowerShell and wrote a script to show some of the use cases. This is just the tip of the iceberg and the script has been built to show some of the options available.</p>
<h2 id="constraints--limitations">Constraints / limitations</h2>
<ol>
<li>The primary focus of this script is IaaS.</li>
<li>Could be better implemented as a function. If there is enough of an ask, I might build this into a function.</li>
<li>Built for my sample use cases.</li>
<li>This is a quick and dirty implementation.</li>
<li>This is <strong>NOT PRODUCTION</strong> ready yet.</li>
</ol>
<h2 id="lets-build-this">Lets build this</h2>
<h3 id="steps">Steps</h3>
<p>You will need the following</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">May. 19, 2023</div>    
                <h1><a href="https://example.com/posts/2023/avs-new-ldaps-run-command/" title="New LDAPS run-command for Azure VMware Solution">New LDAPS run-command for Azure VMware Solution</a></h1>
                <h2 id="what-are-we-doing">What are we doing?</h2>
<p>Showing a newer version of the New-LDAPSIDentitySource Run-Command within Azure VMware Solution</p>
<h2 id="lets-build-this">Lets build this</h2>
<p>If you have been following along and you have used our previous article(s) - <a href="https://cloud.fskelly.com/post/2023/avs-ldaps-configure-part1/">AZURE VMWARE SOLUTION: A COMPREHENSIVE GUIDE TO LDAPS IDENTITY INTEGRATION - PART 1</a> - you would have realized that this quite a process. We took our many customers feedback to our Product Group (PG) within <a href="https://www.microsoft.com">Microsoft</a> and we have worked with them, to create a new version of the &ldquo;Run-Command&rdquo; and this has been released publicly.</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Jan. 25, 2023</div>    
                <h1><a href="https://example.com/posts/2023/avs-ldaps-configure-part1/" title="Azure VMware Solution: A comprehensive guide to LDAPS identity integration - Part 1">Azure VMware Solution: A comprehensive guide to LDAPS identity integration - Part 1</a></h1>
                <p>Author(s): <a href="/about/robinheringa/">Robin Heringa</a> and <a href="/about/fletcherkelly/">Fletcher Kelly</a></p>
<h1 id="implementing-ldaps-identity-integration-with-azure-vmware-solution-series---1-of-4">Implementing LDAPS identity integration with Azure VMware Solution series - 1 of 4</h1>
<p>This is the first part of the blog series on how to implement LDAPS identity integration with Azure VMware Solution. Other parts of this series can be found here:</p>
<ol>
<li><a href="../avs-ldaps-configure-part2/">LDAPS integration - part 2 of 4</a></li>
<li><a href="../avs-ldaps-configure-part3/">LDAPS integration - part 3 of 4</a></li>
<li><a href="../avs-ldaps-configure-part4/">LDAPS integration - part 4 of 4</a></li>
</ol>
<p>Azure VMware Solution (AVS) offers a fully managed software defined data center based on VMware vSphere technologies in the shape of an Azure PaaS service. The PaaS nature of Azure VMware Solution results in a service that is functionally equivalent to your well-known on-premises VMware deployment you may have been using for years with some specific “restrictions” as Microsoft provides a service level agreement and therefor Microsoft is responsible for ensuring a robust and resilient platform in deployment and operation.  Azure VMware Solution is functionally equivalent to on-premises VMware but due to the PaaS nature of the service there are significant technical differences to properly consider.</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Jan. 25, 2023</div>    
                <h1><a href="https://example.com/posts/2023/avs-ldaps-configure-part2/" title="Azure VMware Solution: A comprehensive guide to LDAPS identity integration - Part 2">Azure VMware Solution: A comprehensive guide to LDAPS identity integration - Part 2</a></h1>
                <p>Author(s): <a href="/about/robinheringa/">Robin Heringa</a> and <a href="/about/fletcherkelly/">Fletcher Kelly</a></p>
<h1 id="implementing-ldaps-identity-integration-with-azure-vmware-solution-series---2-of-4">Implementing LDAPS identity integration with Azure VMware Solution series - 2 of 4</h1>
<p>This is the second part of the blog series on how to implement LDAPS identity integration with Azure VMware Solution. Other parts of this series can be found here:</p>
<ol>
<li><a href="../avs-ldaps-configure-part1/">LDAPS integration - part 1 of 4</a></li>
<li><a href="../avs-ldaps-configure-part3/">LDAPS integration - part 3 of 4</a></li>
<li><a href="../avs-ldaps-configure-part4/">LDAPS integration - part 4 of 4</a></li>
</ol>
<h2 id="configure-dns-forwarding-prerequisite">Configure DNS forwarding prerequisite</h2>
<p>Before we can configure integration with an external identity store (e.g. Active Directory Domain Services) we need to make sure that the AVS platform components have the ability to resolve customer DNS zones hosting the LDAPS domain records. This configuration must be made through the Azure Portal blades for Azure VMware Solution.</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Jan. 25, 2023</div>    
                <h1><a href="https://example.com/posts/2023/avs-ldaps-configure-part3/" title="Azure VMware Solution: A comprehensive guide to LDAPS identity integration - Part 3">Azure VMware Solution: A comprehensive guide to LDAPS identity integration - Part 3</a></h1>
                <p>Author(s): <a href="/about/robinheringa/">Robin Heringa</a> and <a href="/about/fletcherkelly/">Fletcher Kelly</a></p>
<h1 id="implementing-ldaps-identity-integration-with-azure-vmware-solution-series---3-of-4">Implementing LDAPS identity integration with Azure VMware Solution series - 3 of 4</h1>
<p>This is the third part of the blog series on how to implement LDAPS identity integration with Azure VMware Solution. Other parts of this series can be found here:</p>
<ol>
<li><a href="../avs-ldaps-configure-part1/">LDAPS integration - part 1 of 4</a></li>
<li><a href="../avs-ldaps-configure-part2/">LDAPS integration - part 2 of 4</a></li>
<li><a href="../avs-ldaps-configure-part4/">LDAPS integration - part 4 of 4</a></li>
</ol>
<h1 id="implement-ldaps-integration">Implement LDAPS integration</h1>
<p>The following sections will guide you through the required process step-by-step</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Jan. 25, 2023</div>    
                <h1><a href="https://example.com/posts/2023/avs-ldaps-configure-part4/" title="Azure VMware Solution: A comprehensive guide to LDAPS identity integration - Part 4">Azure VMware Solution: A comprehensive guide to LDAPS identity integration - Part 4</a></h1>
                <p>Author(s): <a href="/about/robinheringa/">Robin Heringa</a> and <a href="/about/fletcherkelly/">Fletcher Kelly</a></p>
<h1 id="implementing-ldaps-identity-integration-with-azure-vmware-solution-series---4-of-4">Implementing LDAPS identity integration with Azure VMware Solution series - 4 of 4</h1>
<p>This is the fourth and final part of the blog series on how to implement LDAPS identity integration with Azure VMware Solution. Other parts of this series can be found here:</p>
<ol>
<li><a href="../avs-ldaps-configure-part1/">LDAPS integration - part 1 of 4</a></li>
<li><a href="../avs-ldaps-configure-part2/">LDAPS integration - part 2 of 4</a></li>
<li><a href="../avs-ldaps-configure-part3/">LDAPS integration - part 3 of 4</a></li>
</ol>
<p>These steps, for now, are run manually from the Azure Portal. This will be found &ldquo;Azure VMware Solution&rdquo; and under Operations, Run command. Then select &ldquo;New-LDAPSIdentitySource&rdquo;. An automated way of executing the run-command is in the making. Please check back soon as this article will be updated as soon as this is available.
Navigate to Azure Portal and ensure you are on AVS Private Cloud blade</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Oct. 3, 2022</div>    
                <h1><a href="https://example.com/posts/2022/using-arg-tolock-resources/" title="Using Azure Resource Graph and Tags to lock items in Azure">Using Azure Resource Graph and Tags to lock items in Azure</a></h1>
                <h2 id="what-are-we-doing">What are we doing?</h2>
<p>We are going to use Azure Resource Graph to find items with a specific tag, in this case <em>{&ldquo;toBeLocked&rdquo;=&ldquo;Yes&rdquo;}</em> and then place a resource lock on them.</p>
<h2 id="constraints--limitations">Constraints / limitations</h2>
<ol>
<li>Use Azure Resource Graph to perform the search. Very fast and gives you a new way to interface with Azure Resources.</li>
<li>As part of this post, I am giving samples below to create items, you could use these for testing. Please test and make sure with production environment.</li>
<li>You are using an account that can create locks and potentially remove if needed during the testing.</li>
</ol>
<h2 id="lets-build-this">Lets build this</h2>
<h3 id="steps">Steps</h3>
<ol>
<li>Create sample items</li>
<li>Build Azure Resource Graph Queries</li>
<li>Getting items from the query programmatically</li>
<li>Adding locks</li>
<li>Result</li>
</ol>
<h3 id="create-sample-items-to-lock">Create sample items to lock</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#75715e">## create resource group</span>
</span></span><span style="display:flex;"><span>$rgName = <span style="color:#e6db74">&#34;toberesourcelocked&#34;</span>
</span></span><span style="display:flex;"><span>$rgLocation = <span style="color:#e6db74">&#34;northeurope&#34;</span>
</span></span><span style="display:flex;"><span>$rg = new-azresourcegroup -name $rgname -location $rgLocation
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## create items</span>
</span></span><span style="display:flex;"><span>$guid = New-Guid
</span></span><span style="display:flex;"><span>$saName = <span style="color:#e6db74">&#34;sa&#34;</span>
</span></span><span style="display:flex;"><span>$saSuffix = $guid.ToString().Split(<span style="color:#e6db74">&#34;-&#34;</span>)[<span style="color:#ae81ff">0</span>]+$guid.ToString().Split(<span style="color:#e6db74">&#34;-&#34;</span>)[<span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>$saName = (($saName.replace(<span style="color:#e6db74">&#34;-&#34;</span>,<span style="color:#e6db74">&#34;&#34;</span>))+$saSuffix)
</span></span><span style="display:flex;"><span>New-AzStorageAccount -ResourceGroupName $rgName -Name $saName -Location $rgLocation -AccountType Standard_LRS
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## create tag(s)</span>
</span></span><span style="display:flex;"><span>$tags = @{<span style="color:#e6db74">&#34;toBeLocked&#34;</span>=<span style="color:#e6db74">&#34;Yes&#34;</span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## get items in Resource Group and tag them</span>
</span></span><span style="display:flex;"><span>$items = Get-AzResource -ResourceGroupName $rgName
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">foreach</span> ($item <span style="color:#66d9ef">in</span> $items)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    Update-AzTag -ResourceId $item.ResourceId -Tag $tags -Operation Replace
</span></span><span style="display:flex;"><span>} 
</span></span><span style="display:flex;"><span><span style="color:#75715e">## update resource group with tag(s)</span>
</span></span><span style="display:flex;"><span>Update-AzTag -ResourceId $rg.ResourceId -Tag $tags -Operation Replace
</span></span></code></pre></div><h3 id="build-azure-resource-graph-queries">Build Azure Resource Graph Queries</h3>
<h4 id="including-resource-groups">Including Resource Groups</h4>
<pre tabindex="0"><code class="language-azurecli" data-lang="azurecli">resourcecontainers
| where type == &#34;microsoft.resources/subscriptions/resourcegroups&#34;
| mv-expand bagexpansion=array tags
| where isnotempty(tags)
| where tags[0] =~ &#39;toBeLocked&#39; and tags[1] =~ &#39;Yes&#39;
| project  name,type,location,subscriptionId,tags
| union (resources 
| mv-expand bagexpansion=array tags
| where isnotempty(tags)
| where tags[0] =~ &#39;toBeLocked&#39; and tags[1] =~ &#39;Yes&#39;
| project name,type,location,subscriptionId,tags,id)
</code></pre><h4 id="excluding-resource-groups">Excluding Resource Groups</h4>
<pre tabindex="0"><code class="language-azurecli" data-lang="azurecli">Resources
| mv-expand bagexpansion=array tags
| where isnotempty(tags)
| where tags[0] =~ &#39;toBeLocked&#39; and tags[1] =~ &#39;Yes&#39;
</code></pre><h4 id="resource-groups-only">Resource Groups Only</h4>
<pre tabindex="0"><code class="language-azurecli" data-lang="azurecli">ResourceContainers
| where type =~ &#39;microsoft.resources/subscriptions/resourcegroups&#39;
| where tags[&#39;toBeLocked&#39;] =~ &#39;Yes&#39;
</code></pre><h3 id="getting-items-from-the-query-programmatically">Getting items from the query programmatically</h3>
<p>We now have the required queries and you can pick whichever one above suits your needs, I am going to be using <a href="#including-resource-groups">Including Resource Groups</a>. Now we need a way to act against these resources. I am personally quite a fan of <a href="https://learn.microsoft.com/en-us/powershell/">PowerShell</a> so I will provide this sample. You can use <a href="https://learn.microsoft.com/en-us/azure/governance/resource-graph/first-query-powershell#add-the-resource-graph-module">this</a> as a base for my example below. When running the query in <a href="https://learn.microsoft.com/en-us/powershell/">PowerShell</a>, I find <a href="https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_splatting?view=powershell-7.2">splatting</a> is easiest for <a href="https://learn.microsoft.com/en-us/azure/governance/resource-graph/">Azure Resource Graph</a> queries</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Sep. 27, 2022</div>    
                <h1><a href="https://example.com/posts/2022/arc-ssh-windows-linux/" title="Using Arc to SSH into Linux and Windows">Using Arc to SSH into Linux and Windows</a></h1>
                <h2 id="what-are-we-doing">What are we doing?</h2>
<p>We are going to use Azure Arc to SSH into a Linux (ubuntu 20.04) and a Windows Server (Server 2019) machine and run commands.</p>
<h2 id="constraints--limitations">Constraints / limitations</h2>
<ol>
<li>Use only Azure ARC.</li>
<li>Use only public endpoints (I have not yet tested this with Private Endpoints) and my VPN is not currently connected to Azure.</li>
</ol>
<h2 id="considerations">Considerations</h2>
<p>As of the time of this blog post (27-Sep-2022), the <a href="https://learn.microsoft.com/en-us/azure/azure-arc/servers/ssh-arc-overview">Azure Arc SSH</a> functionality is in preview.</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Sep. 14, 2022</div>    
                <h1><a href="https://example.com/posts/2022/check-powershell-type/" title="Check Powershell Console Type">Check Powershell Console Type</a></h1>
                <p>I have been working with some Microsoft Hybrid technologies. My specific example here is around <a href="https://docs.microsoft.com/en-us/azure/azure-arc/vmware-vsphere/overview">Azure Arc-enabled VMware vSphere</a> aspects. When running the scripts provided here there is a key aspect.</p>
<p><strong>Do NOT run this in the PowerShell ISE.</strong></p>
<p>Even with this strong recommendation, it is often accidentally used as it is really easy to perform this action with a right click option and this got me to thinking about how can I check this via code?</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Jun. 20, 2022</div>    
                <h1><a href="https://example.com/posts/2022/bicep-linux-vm-ssh-keys/" title="Using SSH Keys with Bicep based Linux VM templates">Using SSH Keys with Bicep based Linux VM templates</a></h1>
                <p>I this post, I use bicep files for the deployment of Linux VMs AND I add some magic with PowerSehll to allow for the creation or using of existing SSH keys with these VMs.</p>
<p>I am a HUGE fan of SSH keys with Linux VMs for obvious reasons. I could just not find a script or scenario that covered this topic in a way that I actually like. I like to show more details and explain.</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Apr. 25, 2022</div>    
                <h1><a href="https://example.com/posts/2022/openssh-powershell/" title="Using Openssh and creating SSH Keys with Powershell">Using Openssh and creating SSH Keys with Powershell</a></h1>
                <p>In this post I show you my process for creating SSH Keys for Linux Machines.</p>
<p>I use a fair amount of Linux in my work career (creating VMs and the like within Azure). Linux VMs are great for testing with, they use SSH and are configured and ready for testing VERY quickly in Azure. I also use a fair amount of Linux in personal life, with <a href="https://home-assisant.io">Home assistant</a> and <a href="https://plex.tv">Plex</a>.</p>
<p>I know many people use username and password with Linux environments and there is nothing wrong with this, I simply think that keys are better :smile: . I believe this for a few reasons.</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Mar. 28, 2022</div>    
                <h1><a href="https://example.com/posts/2022/poc-vwan-avs/" title="Using Azure Virtual WAN to connect to Azure VMware Solution">Using Azure Virtual WAN to connect to Azure VMware Solution</a></h1>
                <h2 id="how-do-i-connect-my-on-premises-environment-to-avs-in-a-quick-and-simple-way">How do I connect my on-premises environment to AVS in a quick and simple way?</h2>
<p>There are a few patterns available for connecting <a href="https://docs.microsoft.com/en-us/azure/azure-vmware/introduction">Azure VMware Solution</a> to your on-premises network. There is specific guidance for PRODUCTION deployments here <a href="https://docs.microsoft.com/en-us/azure/cloud-adoption-framework/scenarios/azure-vmware/eslz-network-topology-connectivity">here</a>. The option we are talking about here is for a different use case.</p>
<p><strong>Specific use case:</strong> A <em><strong>PoC (Proof of Concept)</strong></em> type environment or smaller environments for testing with a plan to grow after the fact.</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Mar. 17, 2022</div>    
                <h1><a href="https://example.com/posts/2022/avs-to-internet-able-or-not/" title="Azure VMware Solution: To &#39;Internet Enabled&#39; or not?">Azure VMware Solution: To &#39;Internet Enabled&#39; or not?</a></h1>
                <p><strong>Guest Post</strong>
Author: <a href="/about/robinheringa/">Robin Heringa</a></p>
<p><strong>What else do I need to know when using Azure VMware Solution (AVS)?</strong></p>
<p>As you all (probably) know by now Azure VMware Solution is a managed service offered by Microsoft providing a managed VMware vSphere environment to customers. With this offering customers no longer need to worry about hardware maintenance, hardware refresh and software maintenance for the core VMware components (ESXi, vCenter and NSX-T).</p>
<p>By default, after initial deployment of Azure VMware Solution, virtual machines do not have the ability to egress to the Internet. One of the options to enable Internet access is to &ldquo;flip&rdquo; the &ldquo;Internet Enabled&rdquo; toggle in the connectivity pane of the management blades in the Azure Portal:</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Mar. 9, 2022</div>    
                <h1><a href="https://example.com/posts/2022/new-to-avs-nomon-networking-1/" title="I want to use Azure VMware Solution, what should I know about networking?">I want to use Azure VMware Solution, what should I know about networking?</a></h1>
                <p><strong>What else do I need to know when using Azure VMware Solution (AVS)?</strong></p>
<p><em><strong>Networking Edition</strong></em></p>
<p>I have been working with many customers over the last little while that are looking at Azure VMware Solution (AVS).</p>
<p>Often the idea and use case for the customer is correct. There are a few great reasons to use AVS. If you fit within the use cases, you are in for a real treat.</p>
<p>Deciding whether or not you are a fit is part of the equation, there is more to this scenario. Let&rsquo;s dive in a bit more.</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Dec. 9, 2021</div>    
                <h1><a href="https://example.com/posts/2021/2021-arg-networking-mgmt-more/" title="Azure Resource Graph - More queries for Networking and Management Groups">Azure Resource Graph - More queries for Networking and Management Groups</a></h1>
                <p>Just some more queries I have developed.</p>
<h2 id="networking">Networking</h2>
<p><strong>Don&rsquo;t create unnecessarily large virtual networks (for example, /16) to ensure that IP address space isn&rsquo;t wasted.</strong></p>
<pre tabindex="0"><code class="language-Kusto" data-lang="Kusto">resources
| where type == &#34;microsoft.network/virtualnetworks&#34;
| extend addressSpace = todynamic(properties.addressSpace)
| extend addressPrefix = todynamic(properties.addressSpace.addressPrefixes)
| mvexpand addressSpace
| mvexpand addressPrefix
| extend addressMask = split(addressPrefix,&#39;/&#39;)[1]
| where addressMask &lt;= 16
</code></pre><p>Smallest recommended size for a GatewaySubnet is /27</p>
<p><strong>When you are planning your gateway subnet size, refer to the documentation for the configuration that you are planning to create. For example, the ExpressRoute/VPN Gateway coexist configuration requires a larger gateway subnet than most other configurations. Additionally, you may want to make sure your gateway subnet contains enough IP addresses to accommodate possible future additional configurations. While you can create a gateway subnet as small as /29, we recommend that you create a gateway subnet of /27 or larger (/27, /26 etc.) if you have the available address space to do so. This will accommodate most configurations.</strong> <a href="https://docs.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-about-vpn-gateway-settings#gwsub">Microsoft Docs</a></p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Aug. 25, 2021</div>    
                <h1><a href="https://example.com/posts/2021/arg-mg--query-quick-post/" title="Azure Resource Group Enterprise Scale Landing Zone queries">Azure Resource Group Enterprise Scale Landing Zone queries</a></h1>
                <h1 id="azure-resource-graph-examples">Azure Resource Graph Examples</h1>
<p>This is just a quick post. I am slowly working on building a collection of Resource Graph Queries - they can be found <a href="https://github.com/fskelly/azure-resource-graph/tree/main/enterpriseScale">here</a> and will grow over time. It just takes some time to build these.</p>
<p>They will be broken down into a folder structure based upon the <a href="https://docs.microsoft.com/en-us/azure/cloud-adoption-framework/ready/enterprise-scale/design-guidelines">Critical Design Areas of Enterprise Scale Landing Zone</a></p>
<p><img src="https://github.com/fskelly/flkelly-cloudblog/blob/main/public/images/blogImages/2021/azureresourcegraph/folderStructure.png?raw=true" alt="folderStructure"></p>
<p>Hope this helps and keep an eye out for more.</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Jul. 2, 2021</div>    
                <h1><a href="https://example.com/posts/2021/bicep-troubleshooting/" title="Bicep Troubleshooting">Bicep Troubleshooting</a></h1>
                <h1 id="some-basic-troubleshooting-with-azure-bicephttpsdocsmicrosoftcomen-usazureazure-resource-managerbicepoverview">Some basic &ldquo;troubleshooting&rdquo; with <a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/bicep/overview">Azure Bicep</a></h1>
<p>So, let me start with this. The team and the community behind Azure Bicep are amazing. There are some great examples <a href="https://github.com/Azure/bicep">here</a>. I often use these as a base and the rip apart or add to meet my needs, you do <strong>NOT</strong> need to start from ground zero. :smile:</p>
<p>When you are deploying bicep templates you command will look something like this.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span>$bicepFile = <span style="color:#e6db74">&#34;.\main.bicep&#34;</span>
</span></span><span style="display:flex;"><span>New-AzResourceGroupDeployment -ResourceGroupName &lt;resourceGroupName&gt; -TemplateFile &lt;bicepFilePath&gt; -name &lt;deploymentname&gt;
</span></span></code></pre></div><p>I love to use repeatable code, so mine has more variables and would look like this.</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">May. 5, 2021</div>    
                <h1><a href="https://example.com/posts/2021/cli-list-locations-and-peers/" title="Cli List Locations and Peers">Cli List Locations and Peers</a></h1>
                <h1 id="how-to-use-the-azure-cli-to-list-azure-locations-and-their-peers">How to use the Azure CLI to list Azure Locations and their peers</h1>
<p>So this will be a &ldquo;quick post&rdquo; that shows some great functionality within the <a href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli">Azure CLI</a> with <code>az account list-locations</code>. With this command you can expect some output like below, you actually get a lot of content back.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;displayName&#34;</span>: <span style="color:#e6db74">&#34;Brazil Southeast&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;/subscriptions/949ef534-07f5-4138-8b79-aae16a71310c/locations/brazilsoutheast&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;metadata&#34;</span>: <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;geographyGroup&#34;</span>: <span style="color:#e6db74">&#34;South America&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;latitude&#34;</span>: <span style="color:#e6db74">&#34;-22.90278&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;longitude&#34;</span>: <span style="color:#e6db74">&#34;-43.2075&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;pairedRegion&#34;</span>: <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e6db74">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;/subscriptions/949ef534-07f5-4138-8b79-aae16a71310c/locations/brazilsouth&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#e6db74">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;brazilsouth&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#e6db74">&#34;subscriptionId&#34;</span>: null
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">]</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;physicalLocation&#34;</span>: <span style="color:#e6db74">&#34;Rio&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;regionCategory&#34;</span>: <span style="color:#e6db74">&#34;Other&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;regionType&#34;</span>: <span style="color:#e6db74">&#34;Physical&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;brazilsoutheast&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;regionalDisplayName&#34;</span>: <span style="color:#e6db74">&#34;(South America) Brazil Southeast&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;subscriptionId&#34;</span>: null
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>If you look at some of the examples, you will also see some <em>&ldquo;logical&rdquo;</em> locations, example below, there is a way of adding a query to remove these to display only <strong>&ldquo;physical&rdquo;</strong> locations.</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Apr. 14, 2021</div>    
                <h1><a href="https://example.com/posts/2021/azure-rest-api-postman-basics/" title="Azure Rest Api Postman Basics">Azure Rest Api Postman Basics</a></h1>
                <h1 id="absolute-basics-with-azure-and-postmanwwwpostmancom">Absolute basics with Azure and <a href="www.postman.com">PostMan</a></h1>
<h2 id="getting-started">Getting started</h2>
<p>Many of the articles I have found online with regards to the <a href="https://docs.microsoft.com/en-us/rest/api/azure/">Azure REST API</a> assume a fair level of familiarity with <a href="https://azure.microsoft.com/en-us/">Azure</a> which can be a good and bad thing. You see the <a href="https://portal.azure.com">Azure Portal</a> makes interacting with the Azure REST API very easy as a lot of the &ldquo;prerequisite&rdquo; work is done in the portal as part of the process. For this blog post we will work on something quite basic, &ldquo;<a href="https://portal.azure.com/#create/Microsoft.VirtualMachine">Create a Virtual Machine</a>&rdquo;.</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Jan. 18, 2021</div>    
                <h1><a href="https://example.com/posts/2021/expiring-keys-azure-key-vault/" title="Expiring Keys and Secrets within Azure Key Vault">Expiring Keys and Secrets within Azure Key Vault</a></h1>
                <p>I was working with a customer the other day and a fairly simple ask came up, I however could not find an immediate answer within the portal.</p>
<p><strong>How do I check for expiring keys within the Azure KeyVault?</strong></p>
<p>Now being a PowerShell person, I never gave this much thought as for most tasks or actions I perform on the Azure Platform is done through PowerShell, AP, or CLI. So easy enough, however, not everyone knows how to do this in PowerShell. So, I created a simple script.</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Jan. 11, 2021</div>    
                <h1><a href="https://example.com/posts/2021/azure-ghost-cms-and-cdn/" title="Azure Ghost Cms and Cdn">Azure Ghost Cms and Cdn</a></h1>
                <p>I moved my blog onto HUGO. Not everyone would want to do this necessarily, there is a bit of a learning curve, part of the reason <strong>I DID IT</strong> :). However there are other platforms you can use and still add more functionality if you want.</p>
<p>You can use <a href="https://ghost.org/">Ghost</a> and add an <a href="https://docs.microsoft.com/en-us/azure/cdn/cdn-overview">Azure CDN</a>. This is what this blog post will cover.</p>
<p>There are some very clever people out there that have made this very easy for you. From my research you have 2 main options.</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Jan. 5, 2021</div>    
                <h1><a href="https://example.com/posts/2021/my-new-blog-home/" title="My New Blog Home with Azure Static Web App">My New Blog Home with Azure Static Web App</a></h1>
                <p>So, I have spent the last few days / weeks deciding the best way to host a blog. Now I have a decidedly &ldquo;split personality&rdquo;. By this I mean I like to segregate my work and personal hobbies. This can be quite beneficial as this allows me to test a few things.</p>
<h3 id="a-few-key-decisions">A few key decisions</h3>
<ol>
<li>Must be version controlled - good practice and forces me to get more familiar with <a href="https://git-scm.com/">git</a>.</li>
<li>Must be reliable and redundant, or at least enough to re-deploy if needed - see point 1 :) .</li>
<li>Must be as cheap as possible to run and be fairly quick.</li>
<li>Must be a learning experience.</li>
</ol>
<p>Points <strong>1</strong> and <strong>2</strong> makes <a href="https://git-scm.com/">git</a> a natural choice. Point <strong>3</strong> makes <a href="https://azure.microsoft.com/en-us/">Azure</a> or <a href="https://pages.github.com/">GitHub Pages</a> a natural choice. For point <strong>4</strong>, With this being my <em>&ldquo;work persona&rdquo;</em> I chose Azure Static Web App. I have used GitHub Pages for my <em>&ldquo;personal persona&rdquo;</em>.</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Aug. 7, 2019</div>    
                <h1><a href="https://example.com/posts/2019/importance-of-networking-azure/" title="Importance of Networking Azure">Importance of Networking Azure</a></h1>
                <p>As a start to this blog post, I think it is important to understand how I see my role as a CSA (Cloud Solution Architect) with my customer. I am primarily a trusted advisor and my customers respect what I have to say, I question and challenge my customers in a constructive way to approach the challenge or problem statement in a different way. I have an amazing role of using Azure as my LEGO playpen and then building a custom solution (LEGO model) to help my customers.</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Jul. 9, 2019</div>    
                <h1><a href="https://example.com/posts/2019/csa-tools-of-the-trade/" title="Csa Tools of the Trade">Csa Tools of the Trade</a></h1>
                <p>So a question I often get asked is &ldquo;what tools or products do you use?&rdquo;. So I decided to do a post around the tools and technologies that I personally use on a daily basis. So to start this is what people see on my screen on a daily basis.</p>
<p><img src="https://github.com/fskelly/fletchercloud/blob/master/static/images/blogImages/vscodeScreenShot.png?raw=true" alt="VSCode"></p>
<p>This is my most common tool, Visual Studio Code, the version shown above is actually the Insiders Build. The primary reason for this tool is that is a &ldquo;container&rdquo; for other tools and functionality. The extra functionality is enabled with extensions, my most used extensions are as follows:</p>
            </p>
        </div>
    

    
        <div class="post">
            <p>
                <div class="date">Feb. 20, 2019</div>    
                <h1><a href="https://example.com/posts/2019/network-security-group-change-alerting/" title="Network Security Group Change Alerting">Network Security Group Change Alerting</a></h1>
                <p>So, I was with a customer and they are asking for a fairly standard alert.</p>
<p><strong>&ldquo;Please alert me when an NSG is added or modified&rdquo;</strong>. Seems simply enough, however this is not as simply as you think. So I used my favourite search and found the following, “How to receive an email on Azure Network Security Group Rule changes“, this is great content and after testing, it works exactly as expected. I just found one little concern with this approach; this is simply finding the required ID for the action group. I have now investigated and found some code to make this a little easier.</p>
            </p>
        </div>
    

</div>


        <div class="footer">
    Powered by <a href="https://gohugo.io/">Hugo</a> with
    <a href="https://github.com/mrmierzejewski/hugo-theme-console/">Console Theme</a>. 
</div>

    </div>
  </body>
</html>
