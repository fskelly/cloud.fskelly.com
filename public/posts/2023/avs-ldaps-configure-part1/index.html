<!DOCTYPE html>
<html lang="en-us">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>fletchers-cloud-blog/posts/2023/avs-ldaps-configure-part1/</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">
    <meta name="googlebot" content="index,follow,snippet,archive">
    <link rel="stylesheet" href="http://localhost:1313/hugo-theme-console/css/terminal-0.7.4.min.css">
    <link rel="stylesheet" href="http://localhost:1313/hugo-theme-console/css/animate-4.1.1.min.css">
    <link rel="stylesheet" href="http://localhost:1313/hugo-theme-console/css/console.css">
    
      <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
       <meta property="og:title" content="Azure VMware Solution: A comprehensive guide to LDAPS identity integration - Part 1" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/2023/avs-ldaps-configure-part1/" /><meta property="article:published_time" content="2023-01-25T08:45:43+00:00" />



<meta name="twitter:title" content="Azure VMware Solution: A comprehensive guide to LDAPS identity integration - Part 1"/>
<meta name="twitter:description" content="Author(s): Robin Heringa and Fletcher Kelly
Implementing LDAPS identity integration with Azure VMware Solution series - 1 of 4
This is the first part of the blog series on how to implement LDAPS identity integration with Azure VMware Solution. Other parts of this series can be found here:

LDAPS integration - part 2 of 4
LDAPS integration - part 3 of 4
LDAPS integration - part 4 of 4

Azure VMware Solution (AVS) offers a fully managed software defined data center based on VMware vSphere technologies in the shape of an Azure PaaS service. The PaaS nature of Azure VMware Solution results in a service that is functionally equivalent to your well-known on-premises VMware deployment you may have been using for years with some specific “restrictions” as Microsoft provides a service level agreement and therefor Microsoft is responsible for ensuring a robust and resilient platform in deployment and operation.  Azure VMware Solution is functionally equivalent to on-premises VMware but due to the PaaS nature of the service there are significant technical differences to properly consider."/>

</head>
<body class="terminal">
    <div class="container">
        <div class="terminal-nav">
          <header class="terminal-logo">
            <div class="logo terminal-prompt">
              
              
              <a href="http://localhost:1313/" class="no-style site-name">fletchers-cloud-blog</a>:~# 
              <a href='http://localhost:1313/posts'>posts</a>/<a href='http://localhost:1313/posts/2023'>2023</a>/<a href='http://localhost:1313/posts/2023/avs-ldaps-configure-part1'>avs-ldaps-configure-part1</a>/</div></header>
          <nav class="terminal-menu">
            <ul vocab="https://schema.org/" typeof="BreadcrumbList">
                
                <li><a href="http://localhost:1313/about/" typeof="ListItem">about/</a></li>
                
                <li><a href="http://localhost:1313/posts/" typeof="ListItem">posts/</a></li>
                
            </ul>
          </nav>
        </div>
    </div>

    <div class="container animated zoomIn fast" >
        
<h1>Azure VMware Solution: A comprehensive guide to LDAPS identity integration - Part 1</h1>

Jan. 25, 2023


<br/><br/>
<p>Author(s): <a href="/about/robinheringa/">Robin Heringa</a> and <a href="/about/fletcherkelly/">Fletcher Kelly</a></p>
<h1 id="implementing-ldaps-identity-integration-with-azure-vmware-solution-series---1-of-4">Implementing LDAPS identity integration with Azure VMware Solution series - 1 of 4</h1>
<p>This is the first part of the blog series on how to implement LDAPS identity integration with Azure VMware Solution. Other parts of this series can be found here:</p>
<ol>
<li><a href="../avs-ldaps-configure-part2/">LDAPS integration - part 2 of 4</a></li>
<li><a href="../avs-ldaps-configure-part3/">LDAPS integration - part 3 of 4</a></li>
<li><a href="../avs-ldaps-configure-part4/">LDAPS integration - part 4 of 4</a></li>
</ol>
<p>Azure VMware Solution (AVS) offers a fully managed software defined data center based on VMware vSphere technologies in the shape of an Azure PaaS service. The PaaS nature of Azure VMware Solution results in a service that is functionally equivalent to your well-known on-premises VMware deployment you may have been using for years with some specific “restrictions” as Microsoft provides a service level agreement and therefor Microsoft is responsible for ensuring a robust and resilient platform in deployment and operation.  Azure VMware Solution is functionally equivalent to on-premises VMware but due to the PaaS nature of the service there are significant technical differences to properly consider.</p>
<h2 id="run-commands-for-higher-privileged-operations">Run-Commands for high(er) privileged operations</h2>
<p>As a consumer of Azure VMware Solution, you are granted limited administrative privileges that are aligned with the PaaS nature of the service. You are granted access to the CloudAdmin role which holds a subset of the full administrator role. As it is at times needed to allow for “privilege escalation”, Microsoft has enabled you to do so using a feature in the Azure AVS portal blades called “Run-Commands”. Run-Commands allow you to perform a selected number of high privileged actions without requiring the need to submit a service request through Azure Support from the Azure Portal. More details on Run-Commands can be found on Microsoft Learn <a href="https://learn.microsoft.com/en-us/azure/azure-vmware/concepts-run-command">here</a>.</p>
<p>To integrate your Azure VMware Solution SDDC with a directory services provider, in our case Active Directory, we will use a Run-Command: New-LDAPSIdentitySource.</p>
<h2 id="our-azure-vmware-solution-lab-environment">Our Azure VMware Solution lab environment</h2>
<p>To allow us to create this article using “understandable” values for the prerequisites and the parameters required to successfully implement the LDAPS identity integration, we have created a lab environment which is shown in the picture below. Using this picture as a reference we hope to make it easier for anyone to implement LDAPS integration by simply replacing the prerequisite values and parameters (displayed in bold through-out this document) with the values applicable to your environment by simply comparing with our lab and easily translating this to what is applicable for your deployment.</p>
<p>Our lab consists of:</p>
<table>
  <thead>
      <tr>
          <th>Required resources:</th>
          <th style="text-align: left"></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>One Azure VMware Solution Private Cloud called</td>
          <td style="text-align: left"><strong>avs-fta-gwc</strong></td>
      </tr>
      <tr>
          <td>One Active Directory forest and domain called</td>
          <td style="text-align: left"><strong>avsemea.com</strong></td>
      </tr>
      <tr>
          <td>Two Active Directory domain controllers called</td>
          <td style="text-align: left"><strong>avs-gwc-dc001</strong> and <strong>avs-gwc-dc002</strong></td>
      </tr>
      <tr>
          <td>One Active Directory hosted enterprise root certificate authority called</td>
          <td style="text-align: left"><strong>avsemea-avs-gwc-rootca</strong></td>
      </tr>
      <tr>
          <td>One Azure Virtual WAN called</td>
          <td style="text-align: left"><strong>avs-germanywestcentral-vwan1</strong></td>
      </tr>
      <tr>
          <td>One jumpbox virtual machine used for management activities called</td>
          <td style="text-align: left"><strong>avs-gwc-jumpbox</strong></td>
      </tr>
      <tr>
          <td>One Azure Virtual Network called</td>
          <td style="text-align: left"><strong>avs-gwc-172_16_11_0-24</strong></td>
      </tr>
      <tr>
          <td>This vnet holds three separate subnets called</td>
          <td style="text-align: left"><strong>SN-172_16_11_0-26-ADDS</strong>, <strong>AzureBastionSubnet</strong> and <strong>SN-172_16_11_128-26</strong></td>
      </tr>
  </tbody>
</table>
<p>All virtual machines used in the lab are joined to the above mentioned avsemea.com domain
Our lab environment also holds some additional resources that are not required for the LDAPS integration but they will be used when creating additional articles on different Azure VMware related topics just like this one.</p>
<table>
  <thead>
      <tr>
          <th>Optional resources for future use:</th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Two NSX-T segments inside our AVS SDDC called</td>
          <td style="text-align: left"><strong>NSX-SN-192-168-200-0-24</strong> and <strong>NSX-SN-192-168-201-0-24</strong></td>
      </tr>
      <tr>
          <td>One virtual machine for forwarding additional metrics from our AVS SDDC to the Azure Metrics infrastructure called</td>
          <td style="text-align: left"><strong>avs-gwc-metrics001</strong></td>
      </tr>
      <tr>
          <td>One Azure NetAppFiles account that will be used as extensible storage for our AVS SDDC in a later article called</td>
          <td style="text-align: left"><strong>avs-gwc-anfaccount001</strong></td>
      </tr>
  </tbody>
</table>
<p>A graphical representation of our lab environment is shown below:</p>
<figure><img src="/images/blogImages/2023/avs-ldaps-configure-part1/FTA-lab-environment.jpg"
    alt="FTA Lab Environment">
</figure>

<p>While guiding you through the process of gathering all required details and artifacts and using them to complete the LDAPS integration for AVS, we assume that you have all resources mentioned in the table required resources available and that sufficient access permissions are in place.</p>
<p><a href="https://github.com/fskelly/flkelly-cloudblog/blob/main/content/post/2023/avs-ldaps-configure-part1/snippets.ps1">snippets.ps1 file (all code commands)</a><br>
<a href="../avs-ldaps-configure-part2/">Next&gt;</a></p>



        <div class="footer">
    Powered by <a href="https://gohugo.io/">Hugo</a> with
    <a href="https://github.com/mrmierzejewski/hugo-theme-console/">Console Theme</a>. 
</div>

    </div>
  </body>
</html>
